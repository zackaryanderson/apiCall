{"ast":null,"code":"var _jsxFileName = \"/Users/zan/Documents/CodingBootcamp/apiCall/newReactApp/newapp/client/src/Components/RecipeAPI/index.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport { ADD_RECIPE } from '../../utils/mutations';\nimport { Redirect } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction RecipeCall() {\n  _s();\n\n  let apiKey = \"b0c7f65173eb4810a62bd72e96c8563f\";\n  let call = \"https://api.spoonacular.com/recipes/random?number=5&apiKey=\" + apiKey;\n  let data = [];\n\n  async function getNewRecipes(call) {\n    let response = await fetch(call);\n    data = await response.json();\n    dataCapture(data);\n  } //capture Recipe API data\n\n\n  const [addRecipe, {\n    error\n  }] = useMutation(ADD_RECIPE);\n\n  function dataCapture(data) {\n    //store data from API nested in data variable\n    for (let i = 0; i < data.recipes.length; i++) {\n      let apiID = data.recipes[i].id;\n      apiID = apiID.toString();\n      let title = data.recipes[i].title;\n\n      const dataSubmit = async () => {\n        try {\n          const mutationResponse = await addRecipe({\n            variables: {\n              apiID: apiID,\n              title: title\n            }\n          });\n\n          if (error) {\n            throw new Error('something went wrong');\n          }\n\n          ;\n          console.log(mutationResponse);\n        } catch (e) {\n          console.log(e);\n        }\n      };\n\n      dataSubmit();\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    onClick: () => getNewRecipes(call),\n    children: /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"\",\n      children: \"Generate\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n}\n\n_s(RecipeCall, \"USZynGUC+v9e+Q1yPEqOz+oZUic=\", false, function () {\n  return [useMutation];\n});\n\n_c = RecipeCall;\nexport default RecipeCall;\n\nvar _c;\n\n$RefreshReg$(_c, \"RecipeCall\");","map":{"version":3,"names":["React","useMutation","ADD_RECIPE","Redirect","RecipeCall","apiKey","call","data","getNewRecipes","response","fetch","json","dataCapture","addRecipe","error","i","recipes","length","apiID","id","toString","title","dataSubmit","mutationResponse","variables","Error","console","log","e"],"sources":["/Users/zan/Documents/CodingBootcamp/apiCall/newReactApp/newapp/client/src/Components/RecipeAPI/index.js"],"sourcesContent":["import React from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport { ADD_RECIPE } from '../../utils/mutations';\nimport { Redirect } from 'react-router-dom';\n\nfunction RecipeCall() {\n\n    let apiKey = \"b0c7f65173eb4810a62bd72e96c8563f\";\n    let call = \"https://api.spoonacular.com/recipes/random?number=5&apiKey=\" + apiKey;\n    let data = [];\n\n    async function getNewRecipes (call){\n\n        let response = await fetch (call);\n        data = await response.json();\n\n        dataCapture(data);\n\n    }\n\n    //capture Recipe API data\n    const [addRecipe, {error} ] = useMutation(ADD_RECIPE);\n\n    function dataCapture (data) {\n\n        //store data from API nested in data variable\n        for (let i = 0; i < data.recipes.length; i++) {\n\n            let apiID = data.recipes[i].id;\n            apiID = apiID.toString();\n            let title = data.recipes[i].title;\n\n\n            const dataSubmit = async () => {\n                try {\n                    const mutationResponse = await addRecipe({\n                        variables: {\n                            apiID: apiID,\n                            title: title\n                        }\n                    });\n\n                    if (error) {\n                        throw new Error('something went wrong');\n                    };\n                    console.log(mutationResponse);\n                } catch (e) {\n                    console.log(e)\n                }\n            }\n\n            dataSubmit();\n\n\n        }\n    }\n\n\n\n    return (\n        <section onClick = {() => getNewRecipes(call)}>\n            <a href=\"\">Generate</a>\n        </section>\n    )\n}\n\nexport default RecipeCall;\n\n"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,UAAT,QAA2B,uBAA3B;AACA,SAASC,QAAT,QAAyB,kBAAzB;;;AAEA,SAASC,UAAT,GAAsB;EAAA;;EAElB,IAAIC,MAAM,GAAG,kCAAb;EACA,IAAIC,IAAI,GAAG,gEAAgED,MAA3E;EACA,IAAIE,IAAI,GAAG,EAAX;;EAEA,eAAeC,aAAf,CAA8BF,IAA9B,EAAmC;IAE/B,IAAIG,QAAQ,GAAG,MAAMC,KAAK,CAAEJ,IAAF,CAA1B;IACAC,IAAI,GAAG,MAAME,QAAQ,CAACE,IAAT,EAAb;IAEAC,WAAW,CAACL,IAAD,CAAX;EAEH,CAbiB,CAelB;;;EACA,MAAM,CAACM,SAAD,EAAY;IAACC;EAAD,CAAZ,IAAwBb,WAAW,CAACC,UAAD,CAAzC;;EAEA,SAASU,WAAT,CAAsBL,IAAtB,EAA4B;IAExB;IACA,KAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,IAAI,CAACS,OAAL,CAAaC,MAAjC,EAAyCF,CAAC,EAA1C,EAA8C;MAE1C,IAAIG,KAAK,GAAGX,IAAI,CAACS,OAAL,CAAaD,CAAb,EAAgBI,EAA5B;MACAD,KAAK,GAAGA,KAAK,CAACE,QAAN,EAAR;MACA,IAAIC,KAAK,GAAGd,IAAI,CAACS,OAAL,CAAaD,CAAb,EAAgBM,KAA5B;;MAGA,MAAMC,UAAU,GAAG,YAAY;QAC3B,IAAI;UACA,MAAMC,gBAAgB,GAAG,MAAMV,SAAS,CAAC;YACrCW,SAAS,EAAE;cACPN,KAAK,EAAEA,KADA;cAEPG,KAAK,EAAEA;YAFA;UAD0B,CAAD,CAAxC;;UAOA,IAAIP,KAAJ,EAAW;YACP,MAAM,IAAIW,KAAJ,CAAU,sBAAV,CAAN;UACH;;UAAA;UACDC,OAAO,CAACC,GAAR,CAAYJ,gBAAZ;QACH,CAZD,CAYE,OAAOK,CAAP,EAAU;UACRF,OAAO,CAACC,GAAR,CAAYC,CAAZ;QACH;MACJ,CAhBD;;MAkBAN,UAAU;IAGb;EACJ;;EAID,oBACI;IAAS,OAAO,EAAI,MAAMd,aAAa,CAACF,IAAD,CAAvC;IAAA,uBACI;MAAG,IAAI,EAAC,EAAR;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EADJ;IAAA;IAAA;IAAA;EAAA,QADJ;AAKH;;GA3DQF,U;UAgByBH,W;;;KAhBzBG,U;AA6DT,eAAeA,UAAf"},"metadata":{},"sourceType":"module"}